// Vec Test: Generics
import std.collections;

// Tests generic vector operations and type promotion (manual)
void main() {
    print("Testing Generic Vectors...");

    // Test Float Vector
    var vf = vec![1.1, 2.2];
    print(vf[0]); // 1.100000
    print(vf.len()); // 2

    // Test Promotion (Int -> Float)
    var v_mixed = vec![1.0, 2.5];
    print(v_mixed[0]); // 1.000000
    print(v_mixed[1]); // 2.500000

    // Test Empty Vector Assignment
    // Using explicit Vec<int> type annotation
    var v_empty: Vec<int> = vec![];
    print(v_empty.len()); // 0
    v_empty.push(10);
    print(v_empty[0]); // 10

    // Test Nested Vector (Vec<Vec<int>>)
    // Note: Codegen for nested vectors relies on ptr casting, which should work.
    var v_nested = vec![vec![1, 2], vec![3, 4]];
    var first = v_nested[0];
    print(first[0]); // 1
    
    // Test std.collections.reverse
    var v_rev = vec![1, 2, 3];
    reverse::<int>(v_rev);
    print(v_rev[0]); // 3
    print(v_rev[1]); // 2
    print(v_rev[2]); // 1
    
    print("Generic Vector test passed");
}
