# Sprint 14-16: è‡ªä¸¾å‡†å¤‡è·¯çº¿å›¾

> **ç›®æ ‡**: è®© Lency å…·å¤‡ç”¨è‡ªå·±ç¼–å†™ç¼–è¯‘å™¨çš„èƒ½åŠ›  
> **æ—¶é—´**: 2-3 ä¸ªæœˆ

---

## ğŸ¯ è‡ªä¸¾æ‰€éœ€çš„æ ¸å¿ƒèƒ½åŠ›

### âœ… å·²å…·å¤‡ (65%)

1. **åŸºç¡€æ•°æ®ç»“æ„**
   - âœ… Vec<T> - åŠ¨æ€æ•°ç»„
   - âœ… HashMap - å“ˆå¸Œè¡¨ï¼ˆæ•´æ•°é”®ï¼‰
   - âœ… String - å­—ç¬¦ä¸²æ“ä½œ
   - âœ… æ³›å‹æ”¯æŒ

2. **æ§åˆ¶æµ**
   - âœ… if/else, while, for
   - âœ… match è¡¨è¾¾å¼
   - âœ… å‡½æ•°å’Œæ–¹æ³•

3. **æ–‡ä»¶ I/O**
   - âœ… read_file, write_file
   - âœ… file_exists, is_dir

4. **ç±»å‹ç³»ç»Ÿ**
   - âœ… ç»“æ„ä½“ã€æšä¸¾
   - âœ… æ³›å‹ï¼ˆå•æ€åŒ–ï¼‰
   - âœ… Trait

### âš ï¸ éƒ¨åˆ†æ”¯æŒ (20%)

5. **å­—ç¬¦ä¸²å¤„ç†**
   - âœ… åŸºç¡€æ“ä½œï¼ˆsplit, trim, substrï¼‰
   - âš ï¸ æ­£åˆ™è¡¨è¾¾å¼ï¼ˆç¼ºå¤±ï¼‰
   - âš ï¸ Unicode å¤„ç†ï¼ˆæœ‰é™ï¼‰

6. **é”™è¯¯å¤„ç†**
   - âš ï¸ Result<T, E>ï¼ˆè¯­æ³•æ”¯æŒä½†ä¸å®Œæ•´ï¼‰
   - âš ï¸ Option<T>ï¼ˆåŒä¸Šï¼‰
   - âŒ é”™è¯¯ä¼ æ’­ï¼ˆ? æ“ä½œç¬¦ï¼‰

7. **é›†åˆæ“ä½œ**
   - âœ… Vec åŸºç¡€æ–¹æ³•
   - âŒ Iterator trait
   - âŒ å‡½æ•°å¼æ–¹æ³•ï¼ˆmap, filter, foldï¼‰

### âŒ ç¼ºå¤±çš„å…³é”®åˆ©å™¨ (15%)

8. **FFI èƒ½åŠ›**
   - âŒ è°ƒç”¨ C å‡½æ•°ï¼ˆLLVM APIï¼‰
   - âŒ extern "C" å£°æ˜
   - âš ï¸ åŸºç¡€ extern å‡½æ•°ï¼ˆå·²æœ‰éƒ¨åˆ†ï¼‰

9. **é«˜çº§å­—ç¬¦ä¸²**
   - âŒ æ­£åˆ™è¡¨è¾¾å¼å¼•æ“
   - âŒ å­—ç¬¦ä¸²æ„å»ºå™¨ (StringBuilder)
   - âŒ æ ¼å¼åŒ–å­—ç¬¦ä¸² (format!)

10. **ç³»ç»Ÿè°ƒç”¨**
    - âŒ è¿›ç¨‹ç®¡ç†
    - âŒ ç¯å¢ƒå˜é‡
    - âŒ å‘½ä»¤è¡Œå‚æ•°è§£æ

11. **å†…å­˜ç®¡ç†**
    - âŒ æ™ºèƒ½æŒ‡é’ˆ (Rc, Box)
    - âŒ GC æˆ–æ‰€æœ‰æƒç³»ç»Ÿ
    - âš ï¸ å½“å‰ä¾èµ– LLVM

---

## ğŸ“‹ è‡ªä¸¾å‰å¿…é¡»å®Œæˆçš„åŠŸèƒ½

### Priority 0 - ç»å¯¹å¿…éœ€

**1. HashMap<String, T>** - ç¬¦å·è¡¨å¿…éœ€
```lency
// å½“å‰åªæ”¯æŒ HashMap<int, int>
// éœ€è¦ï¼šHashMap<string, Symbol>
var symbol_table = HashMap<string, Symbol>::new()
```
**é¢„è®¡**: 1å‘¨

**2. Result<T, E> å®Œæ•´å®ç°** - é”™è¯¯å¤„ç†æ ¸å¿ƒ
```lency
enum Result<T, E> {
    Ok(T),
    Err(E)
}

// æ–¹æ³•é“¾
result.map(|x| x + 1).unwrap_or(0)

// é”™è¯¯ä¼ æ’­
fn parse() -> Result<AST, Error> {
    let tokens = tokenize()?  // ? æ“ä½œç¬¦
    build_ast(tokens)?
}
```
**é¢„è®¡**: 1-2å‘¨

**3. Iterator Trait** - éå†å’Œå˜æ¢
```lency
trait Iterator<T> {
    Option<T> next()
}

// å‡½æ•°å¼æ“ä½œ
tokens.iter()
    .filter(|t| !t.is_whitespace())
    .map(|t| t.kind)
    .collect()
```
**é¢„è®¡**: 2å‘¨

**4. æ­£åˆ™è¡¨è¾¾å¼** - è¯æ³•åˆ†ææ ¸å¿ƒ
```lency
import std.regex

var pattern = Regex::new(r"\d+")
if pattern.is_match(input) {
    var captures = pattern.captures(input)
}
```
**é¢„è®¡**: 2-3å‘¨ï¼ˆå¯ä»¥å…ˆç”¨ FFI ç»‘å®šç°æœ‰åº“ï¼‰

**5. å­—ç¬¦ä¸²æ ¼å¼åŒ–** - è°ƒè¯•å’Œè¯Šæ–­
```lency
var msg = format!("Error at line {}: {}", line, error)
print!("Found {} tokens", count)
```
**é¢„è®¡**: 1å‘¨

### Priority 1 - é‡è¦ä½†å¯æ›¿ä»£

**6. Box<T> / Rc<T>** - é€’å½’æ•°æ®ç»“æ„
```lency
// AST èŠ‚ç‚¹éœ€è¦é€’å½’å¼•ç”¨
struct Expr {
    Box<ExprKind> kind
}

enum ExprKind {
    Binary(Box<Expr>, Op, Box<Expr>),
    // ...
}
```
**é¢„è®¡**: 1-2å‘¨

**7. Trait å¯¹è±¡** - å¤šæ€æ€§
```lency
trait Visitor {
    void visit_expr(Expr expr)
}

Vec<Box<dyn Visitor>> visitors
```
**é¢„è®¡**: 2-3å‘¨ï¼ˆå¯ä»¥å…ˆç”¨æšä¸¾æ›¿ä»£ï¼‰

**8. å®ç³»ç»Ÿ** - å‡å°‘é‡å¤ä»£ç 
```lency
macro_rules! define_token {
    ($name:ident) => {
        struct $name { /* ... */ }
    }
}
```
**é¢„è®¡**: 4-6å‘¨ï¼ˆå¯é€‰ï¼‰

---

## ğŸ—ºï¸ è‡ªä¸¾è·¯çº¿å›¾

### Phase 1: è¡¥å…¨æ ¸å¿ƒåŠŸèƒ½ (Sprint 14-15, 3-4å‘¨)

**Week 1-2: æ•°æ®ç»“æ„**
- [ ] HashMap<String, V>
- [ ] Result<T, E> æ–¹æ³•
- [ ] Option<T> æ–¹æ³•

**Week 3-4: å­—ç¬¦ä¸²å’Œè¿­ä»£å™¨**
- [ ] Iterator trait
- [ ] åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆFFI ç»‘å®šï¼‰
- [ ] å­—ç¬¦ä¸²æ ¼å¼åŒ–

### Phase 2: ç¼–å†™æ ¸å¿ƒåº“ (Sprint 16-17, 3-4å‘¨)

**Week 5-6: æ•°æ®ç»“æ„åº“**
- [ ] ç”¨ Lency å®ç° Vec
- [ ] ç”¨ Lency å®ç° HashMap
- [ ] ç”¨ Lency å®ç° String

**Week 7-8: è¯æ³•åˆ†æå™¨**
- [ ] Token å®šä¹‰
- [ ] æ­£åˆ™åŒ¹é…å™¨
- [ ] Lexer

### Phase 3: è§£æå™¨ (Sprint 18-19, 4å‘¨)

**Week 9-10: Parser Combinator**
- [ ] åŸºç¡€ç»„åˆå­
- [ ] è¡¨è¾¾å¼è§£æ
- [ ] è¯­å¥è§£æ

**Week 11-12: AST æ„å»º**
- [ ] AST èŠ‚ç‚¹å®šä¹‰
- [ ] å®Œæ•´è§£æå™¨

### Phase 4: è¯­ä¹‰åˆ†æ (Sprint 20-21, 4å‘¨)

**Week 13-14: ç¬¦å·è§£æ**
- [ ] ä½œç”¨åŸŸç®¡ç†
- [ ] ç¬¦å·è¡¨

**Week 15-16: ç±»å‹æ£€æŸ¥**
- [ ] ç±»å‹æ¨æ–­
- [ ] ç±»å‹æ£€æŸ¥

### Phase 5: ä»£ç ç”Ÿæˆ (Sprint 22+, 6-8å‘¨)

**LLVM ç»‘å®šæˆ–è§£é‡Šå™¨**
- [ ] FFI åˆ° LLVM
- æˆ–ï¼šå®ç°ç®€å•çš„å­—èŠ‚ç è§£é‡Šå™¨

---

## ğŸ“Š å‡†å¤‡åº¦è¯„ä¼°

| ç»„ä»¶ | å½“å‰ | éœ€è¦ | å·®è· |
|------|------|------|------|
| æ•°æ®ç»“æ„ | 70% | 95% | HashMap<String> |
| é”™è¯¯å¤„ç† | 40% | 90% | Result æ–¹æ³• + ? |
| å­—ç¬¦ä¸² | 60% | 90% | Regex + Format |
| è¿­ä»£å™¨ | 10% | 80% | Iterator trait |
| å†…å­˜ç®¡ç† | 40% | 70% | Box/Rc |
| FFI | 20% | 60% | extern "C" |

**æ€»ä½“å‡†å¤‡åº¦**: 45% â†’ éœ€è¾¾åˆ° 80%

---

## ğŸ¯ ç«‹å³è¡ŒåŠ¨è®¡åˆ’

### æœ¬å‘¨å®Œæˆï¼š
1. å®ç° HashMap<String, V>
2. å®Œå–„ Result<T, E>

### ä¸‹å‘¨å®Œæˆï¼š
3. Iterator trait åŸºç¡€
4. å­—ç¬¦ä¸²æ ¼å¼åŒ–

### æœ¬æœˆç›®æ ‡ï¼š
5. æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒ
6. ç”¨ Lency ç¼–å†™ç¬¬ä¸€ä¸ª Token å®šä¹‰

---

## ğŸ’¡ å…³é”®æ´å¯Ÿ

**ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›åŠŸèƒ½**:

1. **HashMap<String, V>** - ç¼–è¯‘å™¨æ ¸å¿ƒå°±æ˜¯æŸ¥è¡¨
2. **Result/Option** - é”™è¯¯æ— å¤„ä¸åœ¨
3. **Iterator** - éå† Tokenã€AST èŠ‚ç‚¹
4. **Regex** - è¯æ³•åˆ†æçš„çµé­‚
5. **Format** - é”™è¯¯ä¿¡æ¯è´¨é‡

**æœ€å°å¯è¡Œè‡ªä¸¾**:
- æ ¸å¿ƒï¼šHashMap<String>, Result, Iterator
- å¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼šRegex, Box
- å¯ä»¥æš‚ç¼“ï¼šå®ã€trait å¯¹è±¡ã€GC

---

## ğŸš€ æˆåŠŸæ ‡å‡†

**èƒ½ç”¨ Lency ç¼–å†™**:
1. âœ… Token å®šä¹‰ï¼ˆæšä¸¾ï¼‰
2. âœ… AST èŠ‚ç‚¹ï¼ˆç»“æ„ä½“ï¼‰
3. âš ï¸ è¯æ³•åˆ†æå™¨ï¼ˆéœ€ Regexï¼‰
4. âŒ è¯­æ³•åˆ†æå™¨ï¼ˆéœ€ Iterator + Boxï¼‰
5. âŒ è¯­ä¹‰åˆ†æï¼ˆéœ€ HashMap<String>ï¼‰

**ç›®æ ‡**: 2-3 ä¸ªæœˆåè¾¾åˆ° 80% â†’ å¼€å§‹è‡ªä¸¾å®éªŒ
